!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).just={})}(this,function(t){"use strict"
var r,i,a,o=[]
function e(t){-1===o.indexOf(t)&&o.push(t),a||(a=requestAnimationFrame(s))}function s(){for(var t=performance.now(),e=0;e<o.length;e++){o[e](t)||(o.splice(e,1),e--)}if(a=o.length?requestAnimationFrame(s):0,i){var n=i
r=i=0,n()}}function A(t,e,n){return Math.min(Math.max(t,e),n)}var R,j="idle",w="paused",E="running",F="finish",M="cancel",q=1e3/60,G=[],C=[]
function u(t){return G.length||(R=performance.now(),e(n)),-1===G.indexOf(t)&&G.push(t),t}function n(t){var e=A(t-R,0,2*q)
R=t
for(var n=G.slice(),r=0,i=n;r<i.length;r++){$(S=i[r])}for(var a=0,o=n;a<o.length;a++){z(e,S=o[a])}for(var s=0,u=n;s<u.length;s++){(S=u[s]).playState===M?S.playState=j:S.playState===F&&(S.playState=w)}for(var p=[],f=0,h=n;f<h.length;f++){for(var l=0,c=(S=h[f]).events;l<c.length;l++){var y=c[l]
if(S.listeners){var v=S.listeners[y]
v&&v.length&&Array.prototype.push.apply(p,v)}}S.events.length=0}for(var m=[],d=0,g=n;d<g.length;d++)for(var S=g[d],b=0,_=C;b<_.length;b++){(0,_[b])(S,m)}for(var x=G.length-1;-1<x;x--)n[x].playState!==E&&G.splice(x,1)
for(var k=0,T=m;k<T.length;k++){(0,T[k])()}for(var O=0,P=p;O<P.length;O++){(0,P[O])(t)}return!!G.length}function $(t){if(t.playState===E){var e=t.playbackRate<0,n=t.duration*t.iterations;(e&&t.currentTime<=1||!e&&t.currentTime>=n-1)&&(t.playState=F,t.events.push(F))}}function z(t,e){e.iterations=A(e.iterations,1,86400*7)
var n=e.duration*e.iterations
e.playState===M?(e.currentTime=0,e.playbackRate=1):e.playState===F?e.currentTime=e.playbackRate<0?0:n:e.playState===E&&(e.currentTime+=t*e.playbackRate),e.currentTime=A(e.currentTime,0,n)}var p=0,f=function(){function n(t){var e=this
if(!(e instanceof n))return new n(t)
e.id="_"+ ++p,e.alternate=!1,e.currentTime=0,e.events=[],e.iterations=1,e.keyframes={},e.labels={},e.listeners={},e.playState=E,e.playbackRate=1,e.timelines_=[],t&&e.configure(t),e.id.indexOf("_")}return Object.defineProperty(n.prototype,"duration",{get:function(){var e=0
for(var t in this.timelines_.forEach(function(t){e=Math.max(e,t.animation.duration+t.pos)}),this.keyframes){var n=this.keyframes[t]
for(var r in n)for(var i in n[r])e<+i&&(e=+i)}return e},enumerable:!0,configurable:!0}),n.prototype.add=function(t,e){e=e||{}
var n=this.getPosition_(e.$from)
return null==n&&(n=this.duration),this.timelines_.push({animation:t,pos:n}),u(this)},n.prototype.cancel=function(){return this.playState=M,this.events.push(M),u(this)},n.prototype.configure=function(t){for(var e in t)"function"!=typeof this[e]&&"duration"!==e&&(this[e]=t[e])
return u(this)},n.prototype.finish=function(){return this.playState=F,this.events.push(F),u(this)},n.prototype.getConfig=function(){var t={}
for(var e in this)if("_"!==e[e.length-1]){var n=this[e]
"function"!=typeof n&&(t[e]=n)}return t},n.prototype.getEventGroup_=function(t){var e=this.listeners[t]
return e||(e=this.listeners[t]=[]),e},n.prototype.getPosition_=function(t){return t&&"number"!=typeof t&&(t=this.labels[t]),t},n.prototype.label=function(t,e){return this.labels[t]=void 0===e?this.duration:e,this},n.prototype.off=function(t,e){var n=this.getEventGroup_(t),r=n.indexOf(e)
return-1!==r&&n.splice(r,1),this},n.prototype.on=function(t,e){var n=this.getEventGroup_(t)
return-1===n.indexOf(e)&&n.push(e),this},n.prototype.pause=function(){return this.playState=w,this.events.push("pause"),u(this)},n.prototype.play=function(){return this.playState=E,this.events.push("play"),u(this)},n.prototype.seek=function(t){return((t=this.getPosition_(t))||0===t)&&(this.currentTime=t),this.playState!==E?this.pause():u(this)},n.prototype.update=function(){return u(this)},n}()
C.push(function(t,e){}),t.nextAnimationFrame=function(){return r||(r=new Promise(function(t){i=t})),a||(a=requestAnimationFrame(s)),r},t.Timeline=f,t.tick=e,Object.defineProperty(t,"__esModule",{value:!0})})
