!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).just={})}(this,function(t){"use strict"
function o(t,e){return t-e}function w(t,e,n){return Math.min(Math.max(t,e),n)}function g(t,e){for(var n=0;n<t.length;){if(t[n]>e){--n
break}n++}return Math.min(n,t.length-1)}function v(t){return"number"==typeof t||isFinite(+t)}function s(t){return+t}var r=["viewBox"],i=["innerHTML","textContent"],a={read:function(t,e){return t.getAttribute(e)||""},write:function(t,e,n){t.setAttribute(e,n.toString())}},u={read:function(t,e){return t.style.getPropertyValue(e)},write:function(t,e,n){t.style.setProperty(e,n.toString())}},f={read:function(t,e){return t[e]},write:function(t,e,n){t[e]=n}},h={read:function(t,e){return getComputedStyle(t)[e]},write:function(t,e,n){t.style[e]=n}}
function d(t,e){var n=function(t,e){if(t instanceof Element)return 0===e.indexOf("--")?u:-1!==r.indexOf(e)?a:-1!==i.indexOf(e)?f:h
return f}(t,e)
return{mix:p,read:n.read,write:n.write}}function p(t,e,n){if(v(t)&&v(e))return(+t+ +e)*n
var r=y(t),i=y(e)
if(r.length!==i.length)return n<.5?e:t
for(var a=[],o=0,s=r.length,u=0;u<s;u++){var f=r[u],h=i[u],p=u<s-1;("rgb"===f||"rgba"===f)&&p&&"("===r[u+1]&&(o=3)
var c=p&&("px"===r[u+1]||"px"===i[u+1])
if("number"==typeof f&&"number"==typeof h)if(o)a.push(Math.round(Math.sqrt(w((f*f+h*h)*n,0,255*255)))),o--
else{var l=(f+h)*n
a.push(c?Math.round(l):l)}else a.push(n<.5?h:f)}return function(t){for(var e=1,n=2,r=3,i="",a=0,o=0,s=t.length;o<s;o++){var u=t[o],f="number"==typeof u?e:/^[\(\)\/,]$/i.test(u)?n:r
0!==o&&f===e&&a!==n&&(i+=" "),i+=u,")"===u&&")"!==t[o+1]&&o!==s-1&&(i+=" "),a=f}return i}(a)}function y(t){return t.toString().replace(/#[a-f0-9]{3}([a-f0-9]{3})?/gi,e).replace(/\s*([a-z]+\-?[a-z]*|%|\-?\d*\.?\d+\s*|,+?|\/|\(|\))\s*/gi," $1").trim().split(" ").reduce(function(t,e){var n,r=(n=(n=e).trim())?isFinite(+n)?+n:n:""
return""!==r&&t.push(r),t},[])}function e(t){var e=t.substring(1),n=parseInt(3===e.length?e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:e,16)
return"rgb("+(n>>16&255)+","+(n>>8&255)+","+(255&n)+")"}var c,l,m,b=[]
function n(t){-1===b.indexOf(t)&&b.push(t),m||(m=requestAnimationFrame(S))}function S(){for(var t=performance.now(),e=0;e<b.length;e++){b[e](t)||(b.splice(e,1),e--)}if(m=b.length?requestAnimationFrame(S):0,l){var n=l
c=l=0,n()}}var _,T=1e3/60,O=[]
function x(t){O.length||(_=performance.now(),n(k)),-1===O.indexOf(t)&&O.push(t)}function k(t){var e=w(t-_,0,2*T)
_=t
for(var n=O.map(function(t){return t.getConfig()}),r=0,i=n;r<i.length;r++){E(e,d=i[r])}for(var a=0,o=n;a<o.length;a++){P(d=o[a])}for(var s=[],u=0,f=n;u<f.length;u++){for(var h=0,p=(d=f[u]).events;h<p.length;h++){var c=p[h]
if(d.listeners){var l=d.listeners[c]
l&&l.length&&Array.prototype.push.apply(s,l)}}d.events.length=0}for(var v=[],y=0,g=n;y<g.length;y++){var d
A(d=g[y],v)}for(var m=0;m<O.length;m++)O[m].configure(n[m])
for(m=O.length-1;-1<m;m--)"running"!==n[m].playState&&O.splice(m,1)
for(var b=0,S=v;b<S.length;b++){(0,S[b])()}for(var x=0,k=s;x<k.length;x++){(0,k[x])(t)}return!!O.length}function A(t,v){var y=t.currentTime
for(var e in t.keyframes){var i=t.keyframes[e],a=M(t,e),n=function(p){for(var t,c=i[p],l=(t=c,Object.keys(t).map(s).sort(o)),e=function(t){var e=d(t,p),n=g(l,y),r=-1===n?0:l[n],i=c[l[n]],a=Math.min(n+1,l.length-1),o=l[a],s=c[o],u=(o-y)/(o-r),f=e.read(t,p),h=e.mix(i.value,s.value,u)
f!==h&&v.push(function(){return e.write(t,p,h)})},n=0,r=a;n<r.length;n++){e(r[n])}}
for(var r in i)n(r)}}function M(t,e){if(!e)return[]
if(0!==e.indexOf("@"))return Array.prototype.slice.call(document.querySelectorAll(e))
var n=t.targets[e]
if(!n)throw Error("Target "+e+" not configured.")
return"number"==typeof n.length?n:[n]}function P(t){if("cancel"===t.playState)t.playState="idle"
else if("finish"===t.playState)t.playState="idle"
else{var e=t.duration*t.iterations
t.playbackRate<0?0===t.currentTime&&(t.playState="idle",t.events.push("finish")):t.currentTime===e&&(t.playState="idle",t.events.push("finish"))}}function E(t,e){e.iterations=w(e.iterations,1,86400*7)
var n=e.duration*e.iterations
"cancel"===e.playState?(e.currentTime=0,e.playbackRate=1):"finish"===e.playState?e.currentTime=e.playbackRate<0?0:n:"running"===e.playState&&(e.currentTime+=t*e.playbackRate),e.currentTime=w(e.currentTime,0,n)}var F=function(){function t(t){this.alternate=!1,this.currentTime=0,this.events=[],this.iterations=1,this.keyframes={},this.labels={},this.listeners={},this.playState="idle",this.playbackRate=1,this.targetIds_=0,this.targets={},this.timelines_=[],t&&this.configure(t)}return Object.defineProperty(t.prototype,"duration",{get:function(){var n=0
for(var t in this.timelines_.forEach(function(t){var e=t.animation.duration+t.pos
n<e&&(n=e)}),this.keyframes){var e=this.keyframes[t]
for(var r in e)for(var i in e[r])n<+i&&(n=+i)}return n},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){return void 0===(e=this.getPosition_(e))&&(e=this.duration),this.timelines_.push({animation:t,pos:e}),this},t.prototype.cancel=function(){return this.playState="cancel",this.events.push("cancel"),x(this),this},t.prototype.configure=function(t){this.currentTime,this.duration
for(var e in t)"function"!=typeof this[e]&&"duration"!==e&&(this[e]=t[e])
return this},t.prototype.delay=function(t,e){return this.tween("",t,{"":0},e)},t.prototype.finish=function(){return this.playState="finish",this.events.push("finish"),x(this),this},t.prototype.getConfig=function(){var t={}
for(var e in this)if("_"!==e[e.length-1]){var n=this[e]
"function"!=typeof n&&(t[e]=n)}return t},t.prototype.getEventGroup_=function(t){var e=this.listeners[t]
return e||(e=this.listeners[t]=[]),e},t.prototype.getPosition_=function(t){return t&&"number"!=typeof t&&(t=this.labels[t]),t},t.prototype.label=function(t,e){return this.labels[t]=void 0===e?this.duration:e,this},t.prototype.off=function(t,e){var n=this.getEventGroup_(t),r=n.indexOf(e)
return-1!==r&&n.splice(r,1),this},t.prototype.on=function(t,e){var n=this.getEventGroup_(t)
return-1===n.indexOf(e)&&n.push(e),this},t.prototype.pause=function(){return this.playState="paused",this.events.push("pause"),x(this),this},t.prototype.play=function(){return this.playState="running",this.events.push("play"),x(this),this},t.prototype.seek=function(t){return((t=this.getPosition_(t))||0===t)&&(this.currentTime=t),"running"!==this.playState&&this.pause(),this},t.prototype.set=function(t,e,n){return e["ease"]="steps(1,end)",this.tween(t,0,e,n)},t.prototype.target=function(t,e){return this.targets[t]=e,this},t.prototype.tween=function(t,e,n,r){if(void 0===(r=this.getPosition_(r))&&(r=this.duration),"string"!=typeof t){var i=function(t,e){for(var n in t)if(e===t[n])return n}(this.targets,t)
i||(i="@auto_"+ ++this.targetIds_,this.target(i,t)),t=i}var a=this.keyframes[t]
a||(a=this.keyframes[t]={})
var o=n.ease||"linear",s=n.stagger||0
for(var u in n){var f=n[u]
if("ease"!==u&&(f||0===f)){var h=a[u]
h||(h=a[u]={}),h[r+e]={ease:o,stagger:s,value:f}}}return this},t.prototype.update=function(){return x(this),this},t}()
t.timeline=function(t){return new F(t)},t.nextAnimationFrame=function(){return c||(c=new Promise(function(t){l=t})),m||(m=requestAnimationFrame(S)),c},t.tick=n,Object.defineProperty(t,"__esModule",{value:!0})})
