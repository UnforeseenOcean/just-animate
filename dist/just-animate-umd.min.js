!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).just={})}(this,function(t){"use strict"
function s(t,e){return t-e}function k(t,e,n){return Math.min(Math.max(t,e),n)}function M(t,e){for(var n=0;n<t.length;){if(t[n]>e){--n
break}n++}return Math.min(n,t.length-1)}function r(t){return"number"==typeof t||isFinite(+t)}function o(t){return+t}var i,a,u,f=[]
function e(t){-1===f.indexOf(t)&&f.push(t),u||(u=requestAnimationFrame(h))}function h(){for(var t=performance.now(),e=0;e<f.length;e++){f[e](t)||(f.splice(e,1),e--)}if(u=f.length?requestAnimationFrame(h):0,a){var n=a
i=a=0,n()}}function j(t,e){return t.getAttribute(e)||""}function w(t,e,n){t.setAttribute(e,n.toString())}function A(t,e){return t.style.getPropertyValue(e)}function F(t,e,n){t.style.setProperty(e,n.toString())}function q(t,e){return getComputedStyle(t)[e]}function C(t,e,n){t.style[e]=n}function z(t,e){return t[e]}function E(t,e,n){t[e]=n}var p=/^\s*[\(\),\/\s]\s*/,l=/^#[a-f\d]{3,6}/i,c=/^[a-z][a-z\d\-]*/i,v=/^\-?\d*\.?\d+/,g=/^\-?\d*\.?\d+[a-z%]+/i,y=/^[mhvlcsqt]/i,b=1,_=2,m=3,S=4,d=5
function x(t,e){t.match="",t.pos=t.last=t.state=0,t.pattern=e}function P(t,e){var n=e.exec(t.pattern.substring(t.pos))
return n&&(t.match=n[0],t.last=t.pos,t.pos+=t.match.length),null!=n}function T(t){if(P(t,p))return d
if(t.isPath&&P(t,y)||P(t,c)){if(!(!t.isPath&&t.pos<t.pattern.length-1&&"("===t.pattern[t.pos]))return m
if("rgb"===t.match.toLowerCase()){var e=t.pattern.substring(t.pos),n=e.indexOf(")"),r=e.substring(1,n)
t.pattern=t.pattern.substring(0,t.pos+1+r.length)+",1"+t.pattern.substring(t.pos+1+r.length),t.match="rgba"}return S}if(!t.isPath&&P(t,g))return _
if(P(t,v))return b
if(P(t,l)){var i=t.pattern.substring(t.last+1,t.pos)
return t.pattern=t.pattern.substring(0,t.last)+(a=i,"rgba("+((s=parseInt(3===a.length?a[0]+a[0]+a[1]+a[1]+a[2]+a[2]:a,16))>>16&255)+","+(s>>8&255)+","+(255&s)+",1)")+t.pattern.substring(t.pos),t.pos=t.last,T(t)}var a,s}var O=/([a-z%]+)/i,R=/^m[\s,]*-?\d*\.?\d+/i,G=/(perspective|matrix(3d)?|skew[xy]?|(translate|scale|rotate)([xyz]|3d)?)\(/i
function I(t,e,n){return r(t)&&r(e)?N(+t,+e,n):(G.test(e.toString())&&!G.test(t.toString())&&(t=function(t){var e,n
x(L,t)
var r=0,i=""
for(;1&&(e=P(a=L,p)?d:P(a,v)?b:P(a,g)?_:P(a,c)?S:void 0);)e===S&&(n=L.match.toLowerCase(),r=0),e===_||e===b?(/matrix/i.test(n)?i+=r%3?"1":"0":/matrix3d/i.test(n)?i+=r%4?"1":"0":/scale/i.test(n)?i+="1":i+="0",r++):i+=L.match
var a
return i}(e.toString())),null==t&&(t=""),null==e&&(e=""),function(t,e,n){x(B,t),x(H,e),B.isPath=R.test(t),H.isPath=R.test(e)
var r,i,a="",s=0
for(;1&&(r=T(B),i=T(H),r&&i);){var o=B.match,u=H.match
if(r===b&&i===b){var f=void 0
s?(y=+o,m=+u,d=n,f=Math.round(Math.sqrt(Math.min(Math.max(0,(y*y+m*m)*d),255*255))),s--):f=N(+o,+u,n),a+=f}else if(r===_||i===_){var h=O.exec(r===_?o:u),p=h[1],l=parseFloat(o),c=parseFloat(u),f=N(l,c,n)
a+=f+p}else{var v=n<.5?o:u,g=r===S&&i===S&&("rgb"===v||"rgba"===v)
g&&(s=3),a+=v}}var y,m,d
return a}(t.toString(),e.toString(),n))}var L={}
var B={},H={}
function N(t,e,n,r){var i=t+(e-t)*n
return r?Math.round(i):i}var V=0,D=1,J=2,K=3,Q=["viewBox"],U=["innerHTML","textContent"]
function W(t,e){if(t["__ja"])return t["__ja"][e]}var X,Y=1e3/60,Z=[]
function n(t){Z.length||(X=performance.now(),e($)),-1===Z.indexOf(t)&&Z.push(t)}function $(t){var e=k(t-X,0,2*Y)
X=t
for(var n=Z.map(function(t){return t.getConfig()}),r=0,i=n;r<i.length;r++){rt(e,m=i[r])}for(var a=0,s=n;a<s.length;a++){nt(m=s[a])}for(var o=[],u=0,f=n;u<f.length;u++){for(var h=0,p=(m=f[u]).events;h<p.length;h++){var l=p[h]
if(m.listeners){var c=m.listeners[l]
c&&c.length&&Array.prototype.push.apply(o,c)}}m.events.length=0}for(var v=[],g=0,y=n;g<y.length;g++){var m
tt(m=y[g],v)}for(var d=0;d<Z.length;d++)Z[d].configure(n[d])
for(d=Z.length-1;-1<d;d--)"running"!==n[d].playState&&Z.splice(d,1)
for(var b=0,_=v;b<_.length;b++){(0,_[b])()}for(var S=0,x=o;S<x.length;S++){(0,x[S])(t)}return!!Z.length}function tt(t,T){var O=t.currentTime
for(var e in t.keyframes){var i=t.keyframes[e],a=et(t,e),n=function(x){for(var t,k=i[x],P=(t=k,Object.keys(t).map(o).sort(s)),e=function(t){var e,n,r,i,a,s,o,u=(n=x,"string"==typeof(e=t).tagName&&e.style?0===n.indexOf("--")?D:-1!==Q.indexOf(n)?J:-1!==U.indexOf(n)?V:K:V),f=(r=u)===J?j:r===D?A:r===K?q:z,h=(i=u)===J?w:i===D?F:i===K?C:E,p=I,l=f(t,x),c=M(P,O),v=-1===c?0:P[c],g=k[P[c]],y=Math.min(c+1,P.length-1),m=P[y],d=k[m].value,b=void 0
if(g)b=g.value
else{var _=W(t,x)
null==_&&(s=x,o=_=l,(a=t)["__ja"]||(a["__ja"]={}),a["__ja"][s]=o),b=_}var S=p(b,d,(v-O)/(v-m))
l!==S&&T.push(function(){return h(t,x,S)})},n=0,r=a;n<r.length;n++){e(r[n])}}
for(var r in i)n(r)}}function et(t,e){if(!e)return[]
if(0!==e.indexOf("@"))return Array.prototype.slice.call(document.querySelectorAll(e))
var n=t.targets[e]
if(!n)throw Error("Target "+e+" not configured.")
return"number"==typeof n.length?n:[n]}function nt(t){if("cancel"===t.playState)t.playState="idle"
else if("finish"===t.playState)t.playState="idle"
else{var e=t.duration*t.iterations
t.playbackRate<0?0===t.currentTime&&(t.playState="idle",t.events.push("finish")):t.currentTime===e&&(t.playState="idle",t.events.push("finish"))}}function rt(t,e){e.iterations=k(e.iterations,1,86400*7)
var n=e.duration*e.iterations
"cancel"===e.playState?(e.currentTime=0,e.playbackRate=1):"finish"===e.playState?e.currentTime=e.playbackRate<0?0:n:"running"===e.playState&&(e.currentTime+=t*e.playbackRate),e.currentTime=k(e.currentTime,0,n)}var it=function(){function t(t){this.alternate=!1,this.currentTime=0,this.events=[],this.iterations=1,this.keyframes={},this.labels={},this.listeners={},this.playState="idle",this.playbackRate=1,this.targetIds_=0,this.targets={},this.timelines_=[],t&&this.configure(t)}return Object.defineProperty(t.prototype,"duration",{get:function(){var n=0
for(var t in this.timelines_.forEach(function(t){var e=t.animation.duration+t.pos
n<e&&(n=e)}),this.keyframes){var e=this.keyframes[t]
for(var r in e)for(var i in e[r])n<+i&&(n=+i)}return n},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){return void 0===(e=this.getPosition_(e))&&(e=this.duration),this.timelines_.push({animation:t,pos:e}),this},t.prototype.cancel=function(){return this.playState="cancel",this.events.push("cancel"),n(this),this},t.prototype.configure=function(t){this.currentTime,this.duration
for(var e in t)"function"!=typeof this[e]&&"duration"!==e&&(this[e]=t[e])
return this},t.prototype.delay=function(t,e){return this.animate("",t,{"":0},e)},t.prototype.finish=function(){return this.playState="finish",this.events.push("finish"),n(this),this},t.prototype.getConfig=function(){var t={}
for(var e in this)if("_"!==e[e.length-1]){var n=this[e]
"function"!=typeof n&&(t[e]=n)}return t},t.prototype.getEventGroup_=function(t){var e=this.listeners[t]
return e||(e=this.listeners[t]=[]),e},t.prototype.getPosition_=function(t){return t&&"number"!=typeof t&&(t=this.labels[t]),t},t.prototype.label=function(t,e){return this.labels[t]=void 0===e?this.duration:e,this},t.prototype.off=function(t,e){var n=this.getEventGroup_(t),r=n.indexOf(e)
return-1!==r&&n.splice(r,1),this},t.prototype.on=function(t,e){var n=this.getEventGroup_(t)
return-1===n.indexOf(e)&&n.push(e),this},t.prototype.pause=function(){return this.playState="paused",this.events.push("pause"),n(this),this},t.prototype.play=function(){return this.playState="running",this.events.push("play"),n(this),this},t.prototype.seek=function(t){return((t=this.getPosition_(t))||0===t)&&(this.currentTime=t),"running"!==this.playState&&this.pause(),this},t.prototype.set=function(t,e,n){return e["ease"]="steps(1,end)",this.animate(t,0,e,n)},t.prototype.target=function(t,e){return this.targets[t]=e,this},t.prototype.animate=function(t,e,n,r){if(void 0===(r=this.getPosition_(r))&&(r=this.duration),"string"!=typeof t){var i=function(t,e){for(var n in t)if(e===t[n])return n}(this.targets,t)
i||(i="@auto_"+ ++this.targetIds_,this.target(i,t)),t=i}var a=this.keyframes[t]
a||(a=this.keyframes[t]={})
var s=n.ease||"linear"
for(var o in n){var u=n[o]
if("ease"!==o&&(u||0===u)){var f=a[o]
f||(f=a[o]={}),f[r+e]={ease:s,value:u}}}return this},t.prototype.update=function(){return n(this),this},t}()
t.animate=function(t,e,n){return(new it).animate(t,e,n)},t.timeline=function(t){return new it(t)},t.nextAnimationFrame=function(){return i||(i=new Promise(function(t){a=t})),u||(u=requestAnimationFrame(h)),i},t.tick=e,Object.defineProperty(t,"__esModule",{value:!0})})
