!(function(t, n) {
  'object' == typeof exports && 'undefined' != typeof module
    ? n(exports)
    : 'function' == typeof define && define.amd
    ? define(['exports'], n)
    : n(((t = t || self).just = {}));
})(this, function(t) {
  'use strict';
  function a(n, t) {
    return 'out' === t
      ? function(t) {
          return 1 - n(1 - t);
        }
      : 'in-out' === t
      ? function(t) {
          return t < 0.5 ? n(2 * t) / 2 : 1 - n(2 * (1 - t)) / 2;
        }
      : n;
  }
  var n = 1.70158;
  function c(t) {
    return t;
  }
  var p = 19,
    h = function(t, n, e) {
      var r = 1 - e;
      return (3 * (r * t + e * n) * r + e * e) * e;
    };
  var o = /^\s*[\(\),\/\s]\s*/,
    u = /^\(/,
    s = /^\)/,
    f = /^#[a-f\d]{3,6}/i,
    l = /^[a-z][a-z\d\-]*/i,
    v = /^\-?\d*\.?\d+/,
    y = /^\-?\d*\.?\d+[a-z%]+/i,
    g = /^[mhvlcsqt]/i,
    x = 1,
    d = 2,
    m = 4,
    S = x | m,
    b = 8 | d,
    M = 16 | d,
    _ = 32;
  function k(t, n) {
    (t.match = ''), (t.pos = t.last = t.state = 0), (t.pattern = n);
  }
  function P(t, n) {
    var e = n.exec(t.pattern.substring(t.pos));
    return (
      e && ((t.match = e[0]), (t.last = t.pos), (t.pos += t.match.length)),
      null != e
    );
  }
  function e(r) {
    var i = {},
      a = [],
      o = 1e3;
    return function(t) {
      var n = i[t];
      if (null == n)
        (n = r(t)),
          a.length < o || (delete i[a[0]], a.unshift()),
          (i[t] = n),
          a.push(t);
      else {
        var e = a.indexOf(t);
        0 === e && (a.splice(e, 1), a.push(t));
      }
      return n;
    };
  }
  var $ = e(function(t) {
    var n = parseInt(
      3 === t.length ? t[0] + t[0] + t[1] + t[1] + t[2] + t[2] : t,
      16
    );
    return (
      'rgba(' +
      ((n >> 16) & 255) +
      ',' +
      ((n >> 8) & 255) +
      ',' +
      (255 & n) +
      ',1)'
    );
  });
  function w(t) {
    if (P(t, s)) return M;
    if (P(t, u)) return b;
    if (P(t, o)) return d;
    if ((t.isPath && P(t, g)) || P(t, l)) {
      if (
        !(!t.isPath && t.pos < t.pattern.length - 1 && '(' === t.pattern[t.pos])
      )
        return m;
      if ('rgb' === t.match.toLowerCase()) {
        var n = t.pattern.substring(t.pos),
          e = n.indexOf(')'),
          r = n.substring(1, e);
        (t.pattern =
          t.pattern.substring(0, t.pos + 1 + r.length) +
          ',1' +
          t.pattern.substring(t.pos + 1 + r.length)),
          (t.match = 'rgba');
      }
      return _;
    }
    if (!t.isPath && P(t, y)) return S;
    if (P(t, v)) return x;
    if (P(t, f)) {
      var i = t.pattern.substring(t.last + 1, t.pos);
      return (
        (t.pattern =
          t.pattern.substring(0, t.last) + $(i) + t.pattern.substring(t.pos)),
        (t.pos = t.last),
        w(t)
      );
    }
  }
  var O = {},
    T = {};
  function A(n, t, e) {
    if (!t) return n;
    var r = O[t];
    if (!r) return n;
    var i = r.apply(0, e);
    return function(t) {
      return i(n(t));
    };
  }
  var r,
    i,
    j,
    E = e(function(t) {
      var n;
      k(T, t);
      for (var e, r = c, i = !1, a = []; 1; ) {
        if (!(n = w(T))) {
          r = A(r, e, a);
          break;
        }
        n === M
          ? ((r = A(r, e, a)), (i = !(e = void 0)), (a.length = 0))
          : !i || (0 == (n & x) && 0 == (n & m))
          ? n === m
            ? (r = A(r, T.match))
            : n === _ && ((e = T.match), (i = !0))
          : a.push(T.match);
      }
      return r;
    }),
    z = [];
  function F(t) {
    -1 === z.indexOf(t) && z.push(t), j || (j = requestAnimationFrame(q));
  }
  function q() {
    for (var t = performance.now(), n = 0; n < z.length; n++) {
      z[n](t) || (z.splice(n, 1), n--);
    }
    if (((j = z.length ? requestAnimationFrame(q) : 0), i)) {
      var e = i;
      (r = i = 0), e();
    }
  }
  function I(t, n) {
    return t - n;
  }
  function C(t, n, e) {
    return Math.min(Math.max(t, n), e);
  }
  function R(t, n) {
    for (var e = 0; e < t.length && t[e] < n; ) e++;
    return e;
  }
  function D(t) {
    return 'number' == typeof t || isFinite(+t);
  }
  function G(t) {
    return +t;
  }
  var L,
    B = 'idle',
    H = 'paused',
    N = 'running',
    V = 'finish',
    J = 'cancel',
    K = 1e3 / 60,
    Q = [],
    U = [];
  function W(t) {
    return (
      Q.length || ((L = performance.now()), F(X)),
      -1 === Q.indexOf(t) && Q.push(t),
      t
    );
  }
  function X(t) {
    var n = C(t - L, 0, 2 * K);
    L = t;
    for (var e = Q.slice(), r = 0, i = e; r < i.length; r++) {
      Y((b = i[r]));
    }
    for (var a = 0, o = e; a < o.length; a++) {
      Z(n, (b = o[a]));
    }
    for (var u = 0, s = e; u < s.length; u++) {
      (b = s[u]).playState === J
        ? (b.playState = B)
        : b.playState === V && (b.playState = H);
    }
    for (var f = [], c = 0, p = e; c < p.length; c++) {
      for (var h = 0, l = (b = p[c]).events; h < l.length; h++) {
        var v = l[h];
        if (b.listeners) {
          var y = b.listeners[v];
          y && y.length && Array.prototype.push.apply(f, y);
        }
      }
      b.events.length = 0;
    }
    for (var g = [], d = 0, m = e; d < m.length; d++)
      for (var b = m[d], x = 0, S = U; x < S.length; x++) {
        (0, S[x])(b, g);
      }
    for (var M = Q.length - 1; -1 < M; M--)
      e[M].playState !== N && Q.splice(M, 1);
    for (var _ = 0, k = g; _ < k.length; _++) {
      (0, k[_])();
    }
    for (var P = 0, $ = f; P < $.length; P++) {
      (0, $[P])(t);
    }
    return !!Q.length;
  }
  function Y(t) {
    if (t.playState === N) {
      var n = t.playbackRate < 0,
        e = t.duration * t.iterations;
      ((n && t.currentTime <= 1) || (!n && t.currentTime >= e - 1)) &&
        ((t.playState = V), t.events.push(V));
    }
  }
  function Z(t, n) {
    n.iterations = C(n.iterations, 1, 86400 * 7);
    var e = n.duration * n.iterations;
    n.playState === J
      ? ((n.currentTime = 0), (n.playbackRate = 1))
      : n.playState === V
      ? (n.currentTime = n.playbackRate < 0 ? 0 : e)
      : n.playState === N && (n.currentTime += t * n.playbackRate),
      (n.currentTime = C(n.currentTime, 0, e));
  }
  var tt = 0,
    nt = (function() {
      function e(t) {
        var n = this;
        if (!(n instanceof e)) return new e(t);
        (n.id = '_' + ++tt),
          (n.alternate = !1),
          (n.currentTime = 0),
          (n.events = []),
          (n.iterations = 1),
          (n.keyframes = {}),
          (n.labels = {}),
          (n.listeners = {}),
          (n.playState = N),
          (n.playbackRate = 1),
          (n.timelines_ = []),
          t && n.configure(t),
          n.id.indexOf('_');
      }
      return (
        Object.defineProperty(e.prototype, 'duration', {
          get: function() {
            var n = 0;
            for (var t in (this.timelines_.forEach(function(t) {
              n = Math.max(n, t.animation.duration + t.pos);
            }),
            this.keyframes)) {
              var e = this.keyframes[t];
              for (var r in e) for (var i in e[r]) n < +i && (n = +i);
            }
            return n;
          },
          enumerable: !0,
          configurable: !0,
        }),
        (e.prototype.add = function(t, n) {
          n = n || {};
          var e = this.getPosition_(n.$from);
          return (
            null == e && (e = this.duration),
            this.timelines_.push({ animation: t, pos: e }),
            W(this)
          );
        }),
        (e.prototype.cancel = function() {
          return (this.playState = J), this.events.push(J), W(this);
        }),
        (e.prototype.configure = function(t) {
          for (var n in t)
            'function' != typeof this[n] &&
              'duration' !== n &&
              (this[n] = t[n]);
          return W(this);
        }),
        (e.prototype.finish = function() {
          return (this.playState = V), this.events.push(V), W(this);
        }),
        (e.prototype.getConfig = function() {
          var t = {};
          for (var n in this)
            if ('_' !== n[n.length - 1]) {
              var e = this[n];
              'function' != typeof e && (t[n] = e);
            }
          return t;
        }),
        (e.prototype.getEventGroup_ = function(t) {
          var n = this.listeners[t];
          return n || (n = this.listeners[t] = []), n;
        }),
        (e.prototype.getPosition_ = function(t) {
          return t && 'number' != typeof t && (t = this.labels[t]), t;
        }),
        (e.prototype.label = function(t, n) {
          return (this.labels[t] = void 0 === n ? this.duration : n), this;
        }),
        (e.prototype.off = function(t, n) {
          var e = this.getEventGroup_(t),
            r = e.indexOf(n);
          return -1 !== r && e.splice(r, 1), this;
        }),
        (e.prototype.on = function(t, n) {
          var e = this.getEventGroup_(t);
          return -1 === e.indexOf(n) && e.push(n), this;
        }),
        (e.prototype.pause = function() {
          return (this.playState = H), this.events.push('pause'), W(this);
        }),
        (e.prototype.play = function() {
          return (this.playState = N), this.events.push('play'), W(this);
        }),
        (e.prototype.seek = function(t) {
          return (
            ((t = this.getPosition_(t)) || 0 === t) && (this.currentTime = t),
            this.playState !== N ? this.pause() : W(this)
          );
        }),
        (e.prototype.update = function() {
          return W(this);
        }),
        e
      );
    })(),
    et = 2 * Math.PI;
  function rt(t, n) {
    return t.getAttribute(n) || '';
  }
  function it(t, n, e) {
    t.setAttribute(n, e.toString());
  }
  function at(t, n) {
    return t.style.getPropertyValue(n);
  }
  function ot(t, n, e) {
    t.style.setProperty(n, e.toString());
  }
  function ut(t, n) {
    return t.style[n] || getComputedStyle(t)[n];
  }
  function st(t, n, e) {
    t.style[n] = e;
  }
  function ft(t, n) {
    return t[n];
  }
  function ct(t, n, e) {
    t[n] = e;
  }
  var pt = {};
  var ht = e(function(t) {
      var n, e;
      k(pt, t);
      for (
        var r, i = 0, a = '';
        1 &&
        (n = P((r = pt), o)
          ? d
          : P(r, v)
          ? x
          : P(r, y)
          ? S
          : P(r, l)
          ? _
          : void 0);

      )
        n === _ && ((e = pt.match.toLowerCase()), (i = 0)),
          n === S || n === x
            ? ('matrix' === e
                ? (a += i % 3 ? '0' : '1')
                : 'matrix3d' === e
                ? (a += i % 5 ? '0' : '1')
                : /scale([xyz]|3d)?/i.test(e)
                ? (a += '1')
                : (a += '0'),
              i++)
            : (a += pt.match);
      return a;
    }),
    lt = /([a-z%]+)/i,
    vt = /^m[\s,]*-?\d*\.?\d+/i,
    yt = /(perspective|matrix(3d)?|skew[xy]?|(translate|scale|rotate)([xyz]|3d)?)\(/i;
  function gt(t, n, e) {
    return D(t) && D(n)
      ? bt(+t, +n, e)
      : (yt.test(n.toString()) &&
          !yt.test(t.toString()) &&
          (t = ht(n.toString())),
        null == t && (t = ''),
        null == n && (n = ''),
        (function(t, n, e) {
          k(dt, t),
            k(mt, n),
            (dt.isPath = vt.test(t)),
            (mt.isPath = vt.test(n));
          var r,
            i,
            a = '',
            o = 0;
          for (; 1 && ((r = w(dt)), (i = w(mt)), r && i); ) {
            var u = dt.match,
              s = mt.match;
            if (r === x && i === x) {
              var f = void 0;
              o
                ? ((d = +u),
                  (m = +s),
                  (b = e),
                  (f = Math.round(
                    Math.sqrt(
                      Math.min(Math.max(0, (d * d + m * m) * b), 255 * 255)
                    )
                  )),
                  o--)
                : (f = bt(+u, +s, e)),
                (a += f);
            } else if (r === S || i === S) {
              var c = lt.exec(r === S ? u : s),
                p = c[1],
                h = 'px' === p,
                l = parseFloat(u),
                v = parseFloat(s),
                f = bt(l, v, e, h);
              a += f + p;
            } else {
              var y = e < 0.5 ? u : s,
                g = r === _ && i === _ && ('rgb' === y || 'rgba' === y);
              g && (o = 3), (a += y);
            }
          }
          var d, m, b;
          return a;
        })(t.toString(), n.toString(), e));
  }
  var dt = {},
    mt = {};
  function bt(t, n, e, r) {
    var i = t + (n - t) * e;
    return r ? Math.round(i) : i;
  }
  var xt = 0,
    St = 1,
    Mt = 2,
    _t = 3,
    kt = ['viewBox'],
    Pt = ['innerHTML', 'textContent'];
  var $t = '__just_cache';
  function wt(t, n, e) {
    if (n[$t] && n[$t][t]) return n[$t][t][e];
  }
  function Ot(t, n) {
    if (!n) return [];
    if (0 !== n.indexOf('@'))
      return Array.prototype.slice.call(document.querySelectorAll(n));
    var e = t.targets[n];
    if (!e) throw Error('Target ' + n + ' not configured.');
    return 'number' == typeof e.length ? e : [e];
  }
  function Tt(t, n, e, r, i, a, o, u) {
    var s = t,
      f = n;
    if ((o && (s += o), u && (f -= u), a)) {
      var c = Math.abs((r + 1) * a);
      (s += c), (f -= Math.abs(i * a) - c);
    }
    return s < e ? (e < f ? (e - s) / (f - s) : 1) : 0;
  }
  (nt.prototype.animate = function(t, n, e) {
    var r = this.getPosition_(e.$from);
    if ((null == r && (r = this.duration), 'string' != typeof t)) {
      var i = (function(t, n) {
        if (t) for (var e in t) if (n === t[e]) return e;
      })(this.targets, t);
      i ||
        (this.targetIds || (this.targetIds = 0),
        (i = '@_object_' + ++this.targetIds),
        this.target(i, t)),
        (t = i);
    }
    e.$delay && (n += e.$delay),
      e.$endDelay && (n += e.$endDelay),
      e.$stagger && (n += Ot(this, t).length * e.$stagger);
    var a = this.keyframes[t];
    for (var o in (a || (a = this.keyframes[t] = {}), e)) {
      var u = e[o];
      if ('$' !== o[0] && (u || 0 === u)) {
        var s = a[o];
        s || (s = a[o] = {});
        var f = { value: u };
        for (var c in e) '$' === c[0] && e[c] && (f[c] = e[c]);
        s[r + n] = f;
      }
    }
    return this.update();
  }),
    (nt.prototype.delay = function(t) {
      return this.animate('', t, { '': 0 });
    }),
    (nt.prototype.set = function(t, n) {
      return (n.$ease = 'steps(1,end)'), this.animate(t, 0, n);
    }),
    (nt.prototype.target = function(t, n) {
      return (
        this.targets || (this.targets = {}),
        (this.targets[t] = n),
        this.update()
      );
    }),
    (O.back = function(t) {
      return a(function(t) {
        return t * t * ((n + 1) * t - n);
      }, t);
    }),
    (O.bounce = function(t, n) {
      return (
        (n = +(n || 0 === n ? n : 7.5625)),
        a(
          ((e = function(t) {
            return t < 0.36363636
              ? n * t * t
              : t < 0.72727273
              ? n * (t -= 0.545455) * t + 0.75
              : t < 0.90909091
              ? n * (t -= 0.818182) * t + 0.9375
              : n * (t -= 0.954545) * t + 0.984375;
          }),
          function(t) {
            return 1 - e(1 - t);
          }),
          t
        )
      );
      var e;
    }),
    (O['cubic-bezier'] = function(o, u, s, f) {
      return (
        (u = +u),
        (s = +s),
        (f = +f),
        (o = +o) < 0 || 1 < o || s < 0 || 1 < s
          ? c
          : function(t) {
              if (t <= 0 || 1 <= t) return t;
              var n,
                e,
                r = 0,
                i = 1,
                a = p;
              do {
                if (
                  ((e = h(o, s, (n = 0.5 * (r + i)))), Math.abs(t - e) < 1e-4)
                )
                  return h(u, f, n);
                e < t ? (r = n) : (i = n);
              } while (--a);
              return h(u, f, (n = 0.5 * (r + i)));
            }
      );
    }),
    (O.elastic = function(t, n, e, r) {
      n = +(n || 0 === n ? n : 1);
      var i = (e = +(e || 0 === e ? e : 0.4)) / (r = +(r || 0 === r ? r : 4));
      return a(function(t) {
        return 0 === t || 1 === t
          ? t
          : -n * Math.pow(2, 10 * (t - 1)) * Math.sin(((t - 1 - i) * et) / e);
      }, t);
    }),
    (O.power = function(t, n) {
      return (
        (n = +(n || 0 === n ? n : 2)),
        a(function(t) {
          return Math.pow(t, n);
        }, t)
      );
    }),
    (O.repeat = function(n) {
      return (
        (n = +(n || 0 === n ? n : 2)),
        function(t) {
          return (t *= n) === n ? 1 : t - ~~t;
        }
      );
    }),
    (O.sine = function(t) {
      return a(function(t) {
        return -Math.cos((t * Math.PI) / 2) + 1;
      }, t);
    }),
    (O.steps = function(e, t) {
      var r = 'end' === t ? Math.floor : Math.ceil;
      return function(t) {
        var n = r(t * +e) / +e;
        return n < 0 ? 0 : 1 < n ? 1 : n;
      };
    }),
    (O.yoyo = function(e) {
      return (
        (e = +(e || 0 === e ? e : 2)),
        function(t) {
          var n = ~~(t *= e);
          return n % 2 ? 1 - t + n : t - n;
        }
      );
    }),
    U.push(function(t, n) {}),
    U.push(function(t, A) {
      var n,
        e,
        r = t.currentTime,
        j = t.playState,
        z = t.id,
        F = r % t.duration;
      for (var i in t.keyframes) {
        var a = t.keyframes[i],
          q = Ot(t, i),
          o = function($) {
            for (
              var t,
                w = a[$],
                O = ((t = w),
                Object.keys(t)
                  .map(G)
                  .sort(I)),
                T = q.length,
                n = function(t) {
                  var n,
                    e,
                    r,
                    i,
                    a,
                    o,
                    u,
                    s,
                    f = q[t],
                    c = ((e = $),
                    'string' == typeof (n = f).tagName && n.style
                      ? 0 === e.indexOf('--')
                        ? St
                        : -1 !== kt.indexOf(e)
                        ? Mt
                        : -1 !== Pt.indexOf(e)
                        ? xt
                        : _t
                      : xt),
                    p =
                      (r = c) === Mt ? it : r === St ? ot : r === _t ? st : ct;
                  if (j !== B) {
                    var h = gt,
                      l = ((s = c) === Mt
                        ? rt
                        : s === St
                        ? at
                        : s === _t
                        ? ut
                        : ft)(f, $),
                      v = R(O, F),
                      y = C(v, 0, O.length - 1),
                      g = y !== v ? y : y - 1,
                      d = g < 0 ? 0 : O[g],
                      m = O[y],
                      b = w[m],
                      x = b.value,
                      S = E(b.$ease || ''),
                      M = w[O[g]],
                      _ = void 0;
                    _ =
                      g < 0 || !M
                        ? (null == (P = wt(z, f, $)) &&
                            ((i = z),
                            (o = $),
                            (u = P = l),
                            (a = f)[$t] || (a[$t] = {}),
                            a[$t][i] || (a[$t][i] = {}),
                            (a[$t][i][o] = u)),
                          P)
                        : M.value;
                    var k = h(
                      _,
                      x,
                      S(
                        Tt(
                          d,
                          m,
                          F,
                          t,
                          T,
                          b.$stagger || 0,
                          b.$delay || 0,
                          b.$endDelay || 0
                        )
                      )
                    );
                    l !== k &&
                      A.push(function() {
                        return p(f, $, k);
                      });
                  } else {
                    var P;
                    null != (P = wt(z, f, $)) && p(f, $, P);
                  }
                },
                e = 0;
              e < T;
              e++
            )
              n(e);
          };
        for (var u in a) o(u);
        for (var s = 0, f = q; s < f.length; s++) {
          var c = f[s];
          j === B && ((n = z), (e = c)[$t] && e[$t][n] && delete e[$t][n]);
        }
      }
    }),
    (t.animate = function(t, n, e) {
      return new nt().animate(t, n, e);
    }),
    (t.eases = O),
    (t.getEase = E),
    (t.nextAnimationFrame = function() {
      return (
        r ||
          (r = new Promise(function(t) {
            i = t;
          })),
        j || (j = requestAnimationFrame(q)),
        r
      );
    }),
    (t.Timeline = nt),
    (t.tick = F),
    Object.defineProperty(t, '__esModule', { value: !0 });
});
