!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).just={})}(this,function(t){"use strict"
function h(t,e){return t-e}function k(t,e,n){return Math.min(Math.max(t,e),n)}function A(t,e){for(var n=0;n<t.length;){if(t[n]>e){--n
break}n++}return Math.min(n,t.length-1)}function r(t){return"number"==typeof t||isFinite(+t)}function l(t){return+t}var i,a,s,o=[]
function n(t){-1===o.indexOf(t)&&o.push(t),s||(s=requestAnimationFrame(u))}function u(){for(var t=performance.now(),e=0;e<o.length;e++){o[e](t)||(o.splice(e,1),e--)}if(s=o.length?requestAnimationFrame(u):0,a){var n=a
i=a=0,n()}}function F(t,e){return t.getAttribute(e)||""}function j(t,e,n){t.setAttribute(e,n.toString())}function q(t,e){return t.style.getPropertyValue(e)}function z(t,e,n){t.style.setProperty(e,n.toString())}function C(t,e){return t.style[e]||getComputedStyle(t)[e]}function R(t,e,n){t.style[e]=n}function E(t,e){return t[e]}function G(t,e,n){t[e]=n}var f=/^\s*[\(\),\/\s]\s*/,p=/^#[a-f\d]{3,6}/i,c=/^[a-z][a-z\d\-]*/i,v=/^\-?\d*\.?\d+/,g=/^\-?\d*\.?\d+[a-z%]+/i,y=/^[mhvlcsqt]/i,x=1,S=2,d=3,_=4,m=5
function P(t,e){t.match="",t.pos=t.last=t.state=0,t.pattern=e}function b(t,e){var n=e.exec(t.pattern.substring(t.pos))
return n&&(t.match=n[0],t.last=t.pos,t.pos+=t.match.length),null!=n}function O(t){if(b(t,f))return m
if(t.isPath&&b(t,y)||b(t,c)){if(!(!t.isPath&&t.pos<t.pattern.length-1&&"("===t.pattern[t.pos]))return d
if("rgb"===t.match.toLowerCase()){var e=t.pattern.substring(t.pos),n=e.indexOf(")"),r=e.substring(1,n)
t.pattern=t.pattern.substring(0,t.pos+1+r.length)+",1"+t.pattern.substring(t.pos+1+r.length),t.match="rgba"}return _}if(!t.isPath&&b(t,g))return S
if(b(t,v))return x
if(b(t,p)){var i=t.pattern.substring(t.last+1,t.pos)
return t.pattern=t.pattern.substring(0,t.last)+(a=i,"rgba("+((s=parseInt(3===a.length?a[0]+a[0]+a[1]+a[1]+a[2]+a[2]:a,16))>>16&255)+","+(s>>8&255)+","+(255&s)+",1)")+t.pattern.substring(t.pos),t.pos=t.last,O(t)}var a,s}var T=/([a-z%]+)/i,M=/^m[\s,]*-?\d*\.?\d+/i,w=/(perspective|matrix(3d)?|skew[xy]?|(translate|scale|rotate)([xyz]|3d)?)\(/i
function I(t,e,n){return r(t)&&r(e)?N(+t,+e,n):(w.test(e.toString())&&!w.test(t.toString())&&(t=function(t){var e,n
P(L,t)
var r=0,i=""
for(;1&&(e=b(a=L,f)?m:b(a,v)?x:b(a,g)?S:b(a,c)?_:void 0);)e===_&&(n=L.match.toLowerCase(),r=0),e===S||e===x?("matrix"===n?i+=r%3?"0":"1":"matrix3d"===n?i+=r%5?"0":"1":/scale([xyz]|3d)?/i.test(n)?i+="1":i+="0",r++):i+=L.match
var a
return i}(e.toString())),null==t&&(t=""),null==e&&(e=""),function(t,e,n){P(B,t),P(H,e),B.isPath=M.test(t),H.isPath=M.test(e)
var r,i,a="",s=0
for(;1&&(r=O(B),i=O(H),r&&i);){var o=B.match,u=H.match
if(r===x&&i===x){var f=void 0
s?(d=+o,m=+u,b=n,f=Math.round(Math.sqrt(Math.min(Math.max(0,(d*d+m*m)*b),255*255))),s--):f=N(+o,+u,n),a+=f}else if(r===S||i===S){var p=T.exec(r===S?o:u),h=p[1],l="px"===h,c=parseFloat(o),v=parseFloat(u),f=N(c,v,n,l)
a+=f+h}else{var g=n<.5?o:u,y=r===_&&i===_&&("rgb"===g||"rgba"===g)
y&&(s=3),a+=g}}var d,m,b
return a}(t.toString(),e.toString(),n))}var L={}
var B={},H={}
function N(t,e,n,r){var i=t+(e-t)*n
return r?Math.round(i):i}var V=0,D=1,J=2,K=3,Q=["viewBox"],U=["innerHTML","textContent"]
var W="__just_cache"
function X(t,e,n){if(e[W]&&e[W][t])return e[W][t][n]}var Y,Z=1e3/60,$=[]
function tt(t){var e=k(t-Y,0,2*Z)
Y=t
for(var n=$.slice(),r=0,i=n;r<i.length;r++){it(e,d=i[r])}for(var a=0,s=n;a<s.length;a++){rt(d=s[a])}for(var o=[],u=0,f=n;u<f.length;u++){for(var p=0,h=(d=f[u]).events;p<h.length;p++){var l=h[p]
if(d.listeners){var c=d.listeners[l]
c&&c.length&&Array.prototype.push.apply(o,c)}}d.events.length=0}for(var v=[],g=0,y=n;g<y.length;g++){var d
et(d=y[g],v)}for(var m=$.length-1;-1<m;m--)"running"!==n[m].playState&&$.splice(m,1)
for(var b=0,x=v;b<x.length;b++){(0,x[b])()}for(var S=0,_=o;S<_.length;S++){(0,_[S])(t)}return!!$.length}function et(t,O){var e,n,T=t.currentTime,M=t.playState,w=t.id
for(var r in t.keyframes){var i=t.keyframes[r],a=nt(t,r),s=function(_){for(var t,k=i[_],P=(t=k,Object.keys(t).map(l).sort(h)),e=function(t){var e,n,r,i,a,s,o,u,f=(n=_,"string"==typeof(e=t).tagName&&e.style?0===n.indexOf("--")?D:-1!==Q.indexOf(n)?J:-1!==U.indexOf(n)?V:K:V),p=(r=f)===J?j:r===D?z:r===K?R:G
if("idle"!==M){var h=I,l=((u=f)===J?F:u===D?q:u===K?C:E)(t,_),c=A(P,T),v=-1===c?0:P[c],g=k[P[c]],y=Math.min(c+1,P.length-1),d=P[y],m=k[d].value,b=void 0
if(g)b=g.value
else null==(S=X(w,t,_))&&(i=w,s=_,o=S=l,(a=t)[W]||(a[W]={}),a[W][i]||(a[W][i]={}),a[W][i][s]=o),b=S
var x=h(b,m,(v-T)/(v-d))
l!==x&&O.push(function(){return p(t,_,x)})}else{var S
null!=(S=X(w,t,_))&&p(t,_,S)}},n=0,r=a;n<r.length;n++){e(r[n])}}
for(var o in i)s(o)
for(var u=0,f=a;u<f.length;u++){var p=f[u]
"idle"===M&&(e=w,(n=p)[W]&&n[W][e]&&delete n[W][e])}}}function nt(t,e){if(!e)return[]
if(0!==e.indexOf("@"))return Array.prototype.slice.call(document.querySelectorAll(e))
var n=t.targets[e]
if(!n)throw Error("Target "+e+" not configured.")
return"number"==typeof n.length?n:[n]}function rt(t){if("cancel"===t.playState)t.playState="idle"
else if("finish"===t.playState)t.playState="idle"
else{var e=t.duration*t.iterations
t.playbackRate<0?0===t.currentTime&&(t.playState="idle",t.events.push("finish")):t.currentTime===e&&(t.playState="idle",t.events.push("finish"))}}function it(t,e){e.iterations=k(e.iterations,1,86400*7)
var n=e.duration*e.iterations
"cancel"===e.playState?(e.currentTime=0,e.playbackRate=1):"finish"===e.playState?e.currentTime=e.playbackRate<0?0:n:"running"===e.playState&&(e.currentTime+=t*e.playbackRate),e.currentTime=k(e.currentTime,0,n)}var at=0,st=function(){function e(t){if(!(this instanceof e))return new e(t)
this.id="_"+ ++at,this.alternate=!1,this.currentTime=0,this.events=[],this.iterations=1,this.keyframes={},this.labels={},this.listeners={},this.playState="running",this.playbackRate=1,this.targetIds_=0,this.targets={},this.timelines_=[],t&&this.configure(t),this.id.indexOf("_")}return Object.defineProperty(e.prototype,"duration",{get:function(){for(var t=0,e=0,n=this.timelines_;e<n.length;e++){var r=n[e],i=r.animation.duration+r.pos
t<i&&(t=i)}for(var a in this.keyframes){var s=this.keyframes[a]
for(var o in s)for(var u in s[o])t<+u&&(t=+u)}return t},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e){return void 0===(e=this.getPosition_(e))&&(e=this.duration),this.timelines_.push({animation:t,pos:e}),this.update()},e.prototype.cancel=function(){return this.playState="cancel",this.events.push("cancel"),this.update()},e.prototype.configure=function(t){for(var e in t)"function"!=typeof this[e]&&"duration"!==e&&(this[e]=t[e])
return this},e.prototype.delay=function(t,e){return this.animate("",t,{"":0},e)},e.prototype.finish=function(){return this.playState="finish",this.events.push("finish"),this.update()},e.prototype.getConfig=function(){var t={}
for(var e in this)if("_"!==e[e.length-1]){var n=this[e]
"function"!=typeof n&&(t[e]=n)}return t},e.prototype.getEventGroup_=function(t){var e=this.listeners[t]
return e||(e=this.listeners[t]=[]),e},e.prototype.getPosition_=function(t){return t&&"number"!=typeof t&&(t=this.labels[t]),t},e.prototype.label=function(t,e){return this.labels[t]=void 0===e?this.duration:e,this},e.prototype.off=function(t,e){var n=this.getEventGroup_(t),r=n.indexOf(e)
return-1!==r&&n.splice(r,1),this},e.prototype.on=function(t,e){var n=this.getEventGroup_(t)
return-1===n.indexOf(e)&&n.push(e),this},e.prototype.pause=function(){return this.playState="paused",this.events.push("pause"),this.update()},e.prototype.play=function(){return this.playState="running",this.events.push("play"),this.update()},e.prototype.seek=function(t){return((t=this.getPosition_(t))||0===t)&&(this.currentTime=t),"running"!==this.playState?this.pause():this.update()},e.prototype.set=function(t,e,n){return e["ease"]="steps(1,end)",this.animate(t,0,e,n)},e.prototype.target=function(t,e){return this.targets[t]=e,this.update()},e.prototype.animate=function(t,e,n,r){if(void 0===(r=this.getPosition_(r))&&(r=this.duration),"string"!=typeof t){var i=function(t,e){for(var n in t)if(e===t[n])return n}(this.targets,t)
i||(i="@_"+ ++this.targetIds_,this.target(i,t)),t=i}var a=this.keyframes[t]
a||(a=this.keyframes[t]={})
var s=n.ease||"linear"
for(var o in n){var u=n[o]
if("ease"!==o&&(u||0===u)){var f=a[o]
f||(f=a[o]={}),f[r+e]={ease:s,value:u}}}return this.update()},e.prototype.update=function(){var t
return t=this,$.length||(Y=performance.now(),n(tt)),-1===$.indexOf(t)&&$.push(t),this},e}()
t.animate=function(t,e,n){return(new st).animate(t,e,n)},t.nextAnimationFrame=function(){return i||(i=new Promise(function(t){a=t})),s||(s=requestAnimationFrame(u)),i},t.tick=n,t.Timeline=st,Object.defineProperty(t,"__esModule",{value:!0})})
