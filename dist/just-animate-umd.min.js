!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).just={})}(this,function(t){"use strict"
function a(e,t){return"out"===t?function(t){return 1-e(1-t)}:"in-out"===t?function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2}:e}var e=1.70158
function n(t){return a(function(t){return t*t*((e+1)*t-e)},t)}function c(t){return t}var p=19,h=function(t,e,n){var r=1-n
return(3*(r*t+n*e)*r+n*n)*n}
var o=/^\s*[\(\),\/\s]\s*/,s=/^\(/,f=/^\)/,l=/^#[a-f\d]{3,6}/i,v=/^[a-z][a-z\d\-]*/i,y=/^\-?\d*\.?\d+/,g=/^\-?\d*\.?\d+[a-z%]+/i,d=/^[mhvlcsqt]/i,x=1,m=2,b=4,S=x|b,_=8|m,M=16|m,k=32
function P(t,e){t.match="",t.pos=t.last=t.state=0,t.pattern=e}function w(t,e){var n=e.exec(t.pattern.substring(t.pos))
return n&&(t.match=n[0],t.last=t.pos,t.pos+=t.match.length),null!=n}function O(t){if(w(t,f))return M
if(w(t,s))return _
if(w(t,o))return m
if(t.isPath&&w(t,d)||w(t,v)){if(!(!t.isPath&&t.pos<t.pattern.length-1&&"("===t.pattern[t.pos]))return b
if("rgb"===t.match.toLowerCase()){var e=t.pattern.substring(t.pos),n=e.indexOf(")"),r=e.substring(1,n)
t.pattern=t.pattern.substring(0,t.pos+1+r.length)+",1"+t.pattern.substring(t.pos+1+r.length),t.match="rgba"}return k}if(!t.isPath&&w(t,g))return S
if(w(t,y))return x
if(w(t,l)){var i=t.pattern.substring(t.last+1,t.pos)
return t.pattern=t.pattern.substring(0,t.last)+(a=i,"rgba("+((u=parseInt(3===a.length?a[0]+a[0]+a[1]+a[1]+a[2]+a[2]:a,16))>>16&255)+","+(u>>8&255)+","+(255&u)+",1)")+t.pattern.substring(t.pos),t.pos=t.last,O(t)}var a,u}var u={},T={}
function z(t){var e
P(T,t)
for(var n,r=c,i=!1,a=[];1;){if(!(e=O(T))){r=A(r,n,a)
break}e===M?(r=A(r,n,a),i=!(n=void 0),a.length=0):!i||0==(e&x)&&0==(e&b)?e===b?r=A(r,T.match):e===k&&(n=T.match,i=!0):a.push(T.match)}return r}function A(e,t,n){if(!t)return e
var r=u[t]
if(!r)return e
var i=r.apply(0,n)
return function(t){return i(e(t))}}var r,i,F,j=[]
function q(t){-1===j.indexOf(t)&&j.push(t),F||(F=requestAnimationFrame(C))}function C(){for(var t=performance.now(),e=0;e<j.length;e++){j[e](t)||(j.splice(e,1),e--)}if(F=j.length?requestAnimationFrame(C):0,i){var n=i
r=i=0,n()}}function E(n,t){var r="end"===t?Math.floor:Math.ceil
return function(t){var e=r(t*+n)/+n
return e<0?0:1<e?1:e}}function I(t,e){return t-e}function R(t,e,n){return Math.min(Math.max(t,e),n)}function G(t,e){for(var n=0;n<t.length;){if(t[n]>e){--n
break}n++}return Math.min(n,t.length-1)}function L(t){return"number"==typeof t||isFinite(+t)}function B(t){return+t}function H(t,e){return t.getAttribute(e)||""}function N(t,e,n){t.setAttribute(e,n.toString())}function V(t,e){return t.style.getPropertyValue(e)}function D(t,e,n){t.style.setProperty(e,n.toString())}function J(t,e){return t.style[e]||getComputedStyle(t)[e]}function K(t,e,n){t.style[e]=n}function Q(t,e){return t[e]}function U(t,e,n){t[e]=n}var W=/([a-z%]+)/i,X=/^m[\s,]*-?\d*\.?\d+/i,Y=/(perspective|matrix(3d)?|skew[xy]?|(translate|scale|rotate)([xyz]|3d)?)\(/i
function Z(t,e,n){return L(t)&&L(e)?nt(+t,+e,n):(Y.test(e.toString())&&!Y.test(t.toString())&&(t=function(t){var e,n
P($,t)
var r=0,i=""
for(;1&&(e=w(a=$,o)?m:w(a,y)?x:w(a,g)?S:w(a,v)?k:void 0);)e===k&&(n=$.match.toLowerCase(),r=0),e===S||e===x?("matrix"===n?i+=r%3?"0":"1":"matrix3d"===n?i+=r%5?"0":"1":/scale([xyz]|3d)?/i.test(n)?i+="1":i+="0",r++):i+=$.match
var a
return i}(e.toString())),null==t&&(t=""),null==e&&(e=""),function(t,e,n){P(tt,t),P(et,e),tt.isPath=X.test(t),et.isPath=X.test(e)
var r,i,a="",u=0
for(;1&&(r=O(tt),i=O(et),r&&i);){var o=tt.match,s=et.match
if(r===x&&i===x){var f=void 0
u?(d=+o,m=+s,b=n,f=Math.round(Math.sqrt(Math.min(Math.max(0,(d*d+m*m)*b),255*255))),u--):f=nt(+o,+s,n),a+=f}else if(r===S||i===S){var c=W.exec(r===S?o:s),p=c[1],h="px"===p,l=parseFloat(o),v=parseFloat(s),f=nt(l,v,n,h)
a+=f+p}else{var y=n<.5?o:s,g=r===k&&i===k&&("rgb"===y||"rgba"===y)
g&&(u=3),a+=y}}var d,m,b
return a}(t.toString(),e.toString(),n))}var $={}
var tt={},et={}
function nt(t,e,n,r){var i=t+(e-t)*n
return r?Math.round(i):i}var rt=0,it=1,at=2,ut=3,ot=["viewBox"],st=["innerHTML","textContent"]
var ft="__just_cache"
function ct(t,e,n){if(e[ft]&&e[ft][t])return e[ft][t][n]}var pt,ht=1e3/60,lt=[]
function vt(t){var e=R(t-pt,0,2*ht)
pt=t
for(var n=lt.slice(),r=0,i=n;r<i.length;r++){mt(e,d=i[r])}for(var a=0,u=n;a<u.length;a++){dt(d=u[a])}for(var o=[],s=0,f=n;s<f.length;s++){for(var c=0,p=(d=f[s]).events;c<p.length;c++){var h=p[c]
if(d.listeners){var l=d.listeners[h]
l&&l.length&&Array.prototype.push.apply(o,l)}}d.events.length=0}for(var v=[],y=0,g=n;y<g.length;y++){var d
yt(d=g[y],v)}for(var m=lt.length-1;-1<m;m--)"running"!==n[m].playState&&lt.splice(m,1)
for(var b=0,x=v;b<x.length;b++){(0,x[b])()}for(var S=0,_=o;S<_.length;S++){(0,_[S])(t)}return!!lt.length}function yt(t,w){var e,n,O=t.currentTime,T=t.playState,A=t.id
for(var r in t.keyframes){var i=t.keyframes[r],a=gt(t,r),u=function(M){for(var t,k=i[M],P=(t=k,Object.keys(t).map(B).sort(I)),e=function(t){var e,n,r,i,a,u,o,s,f=(n=M,"string"==typeof(e=t).tagName&&e.style?0===n.indexOf("--")?it:-1!==ot.indexOf(n)?at:-1!==st.indexOf(n)?rt:ut:rt),c=(r=f)===at?N:r===it?D:r===ut?K:U
if("idle"!==T){var p=Z,h=((s=f)===at?H:s===it?V:s===ut?J:Q)(t,M),l=G(P,O),v=-1===l?0:P[l],y=k[P[l]],g=Math.min(l+1,P.length-1),d=P[g],m=k[d].value,b=z(k[d].ease||"linear"),x=void 0
if(y)x=y.value
else null==(_=ct(A,t,M))&&(i=A,u=M,o=_=h,(a=t)[ft]||(a[ft]={}),a[ft][i]||(a[ft][i]={}),a[ft][i][u]=o),x=_
var S=p(x,m,b((v-O)/(v-d)))
h!==S&&w.push(function(){return c(t,M,S)})}else{var _
null!=(_=ct(A,t,M))&&c(t,M,_)}},n=0,r=a;n<r.length;n++){e(r[n])}}
for(var o in i)u(o)
for(var s=0,f=a;s<f.length;s++){var c=f[s]
"idle"===T&&(e=A,(n=c)[ft]&&n[ft][e]&&delete n[ft][e])}}}function gt(t,e){if(!e)return[]
if(0!==e.indexOf("@"))return Array.prototype.slice.call(document.querySelectorAll(e))
var n=t.targets[e]
if(!n)throw Error("Target "+e+" not configured.")
return"number"==typeof n.length?n:[n]}function dt(t){if("cancel"===t.playState)t.playState="idle"
else if("finish"===t.playState)t.playState="paused"
else{var e=t.duration*t.iterations
t.playbackRate<0?0===t.currentTime&&(t.playState="paused",t.events.push("finish")):t.currentTime===e&&(t.playState="paused",t.events.push("finish"))}}function mt(t,e){e.iterations=R(e.iterations,1,86400*7)
var n=e.duration*e.iterations
"cancel"===e.playState?(e.currentTime=0,e.playbackRate=1):"finish"===e.playState?e.currentTime=e.playbackRate<0?0:n:"running"===e.playState&&(e.currentTime+=t*e.playbackRate),e.currentTime=R(e.currentTime,0,n)}var bt=0,xt=function(){function e(t){if(!(this instanceof e))return new e(t)
this.id="_"+ ++bt,this.alternate=!1,this.currentTime=0,this.events=[],this.iterations=1,this.keyframes={},this.labels={},this.listeners={},this.playState="running",this.playbackRate=1,this.targetIds_=0,this.targets={},this.timelines_=[],t&&this.configure(t),this.id.indexOf("_")}return Object.defineProperty(e.prototype,"duration",{get:function(){for(var t=0,e=0,n=this.timelines_;e<n.length;e++){var r=n[e],i=r.animation.duration+r.pos
t<i&&(t=i)}for(var a in this.keyframes){var u=this.keyframes[a]
for(var o in u)for(var s in u[o])t<+s&&(t=+s)}return t},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e){return void 0===(e=this.getPosition_(e))&&(e=this.duration),this.timelines_.push({animation:t,pos:e}),this.update()},e.prototype.cancel=function(){return this.playState="cancel",this.events.push("cancel"),this.update()},e.prototype.configure=function(t){for(var e in t)"function"!=typeof this[e]&&"duration"!==e&&(this[e]=t[e])
return this},e.prototype.delay=function(t,e){return this.animate("",t,{"":0},e)},e.prototype.finish=function(){return this.playState="finish",this.events.push("finish"),this.update()},e.prototype.getConfig=function(){var t={}
for(var e in this)if("_"!==e[e.length-1]){var n=this[e]
"function"!=typeof n&&(t[e]=n)}return t},e.prototype.getEventGroup_=function(t){var e=this.listeners[t]
return e||(e=this.listeners[t]=[]),e},e.prototype.getPosition_=function(t){return t&&"number"!=typeof t&&(t=this.labels[t]),t},e.prototype.label=function(t,e){return this.labels[t]=void 0===e?this.duration:e,this},e.prototype.off=function(t,e){var n=this.getEventGroup_(t),r=n.indexOf(e)
return-1!==r&&n.splice(r,1),this},e.prototype.on=function(t,e){var n=this.getEventGroup_(t)
return-1===n.indexOf(e)&&n.push(e),this},e.prototype.pause=function(){return this.playState="paused",this.events.push("pause"),this.update()},e.prototype.play=function(){return this.playState="running",this.events.push("play"),this.update()},e.prototype.seek=function(t){return((t=this.getPosition_(t))||0===t)&&(this.currentTime=t),"running"!==this.playState?this.pause():this.update()},e.prototype.set=function(t,e,n){return e["ease"]="steps(1,end)",this.animate(t,0,e,n)},e.prototype.target=function(t,e){return this.targets[t]=e,this.update()},e.prototype.animate=function(t,e,n,r){if(void 0===(r=this.getPosition_(r))&&(r=this.duration),"string"!=typeof t){var i=function(t,e){for(var n in t)if(e===t[n])return n}(this.targets,t)
i||(i="@_"+ ++this.targetIds_,this.target(i,t)),t=i}var a=this.keyframes[t]
a||(a=this.keyframes[t]={})
var u=n.ease||"linear"
for(var o in n){var s=n[o]
if("ease"!==o&&(s||0===s)){var f=a[o]
f||(f=a[o]={}),f[r+e]={ease:u,value:s}}}return this.update()},e.prototype.update=function(){var t
return t=this,lt.length||(pt=performance.now(),q(vt)),-1===lt.indexOf(t)&&lt.push(t),this},e}()
var St=2*Math.PI
u.back=n,u.bounce=function(t,e){return e=+(e||0===e?e:7.5625),a((n=function(t){return t<.36363636?e*t*t:t<.72727273?e*(t-=.545455)*t+.75:t<.90909091?e*(t-=.818182)*t+.9375:e*(t-=.954545)*t+.984375},function(t){return 1-n(1-t)}),t)
var n},u["cubic-bezier"]=function(u,o,s,f){return o=+o,s=+s,f=+f,(u=+u)<0||1<u||s<0||1<s?c:function(t){if(t<=0||1<=t)return t
var e,n,r=0,i=1,a=p
do{if(n=h(u,s,e=.5*(r+i)),Math.abs(t-n)<1e-4)return h(o,f,e)
n<t?r=e:i=e}while(--a)
return h(o,f,e=.5*(r+i))}},u["ease-in"]=function(){return n("in")},u["ease-in-out"]=function(){return n("in-out")},u["ease-out"]=function(){return n("out")},u.elastic=function(t,e,n,r){e=+(e||0===e?e:1)
var i=(n=+(n||0===n?n:.4))/(r=+(r||0===r?r:4))
return a(function(t){return 0===t||1===t?t:-e*Math.pow(2,10*(t-1))*Math.sin((t-1-i)*St/n)},t)},u.power=function(t,e){return e=+(e||0===e?e:2),a(function(t){return Math.pow(t,e)},t)},u.repeat=function(e){return e=+(e||0===e?e:2),function(t){return(t*=e)-~~t}},u.sine=function(t){return a(function(t){return-Math.cos(t*Math.PI/2)+1},t)},u.steps=E,u["step-end"]=function(){return E(1,"end")},u["step-start"]=function(){return E(1)},u.yoyo=function(n){return n=+(n||0===n?n:2),function(t){var e=~~(t*=n)
return e%2?1-t+e:t-e}},t.animate=function(t,e,n){return(new xt).animate(t,e,n)},t.eases=u,t.getEase=z,t.nextAnimationFrame=function(){return r||(r=new Promise(function(t){i=t})),F||(F=requestAnimationFrame(C)),r},t.Timeline=xt,t.tick=q,Object.defineProperty(t,"__esModule",{value:!0})})
