var JA=function(t){"use strict"
var e=function(){function t(){this.subs=[],this.buffer=[]}return t.prototype.next=function(t){var e=this.buffer
if(e.push(t),1>=e.length){for(var n=0;n<e.length;n++){var r=this.subs.slice()
t=e[n]
for(var i=0;i<r.length;i++)r[i](t)}e.length=0}},t.prototype.subscribe=function(t){var e=this.subs
return e.push(t),{unsubscribe:function(){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}},t}(),n=3,r=1,i=2,s="idle",a=Array.prototype.push,o=2
function u(t){return null!=t}function f(t){return"string"==typeof t}function p(t,e){var n
return(n=e)&&"string"!=typeof n&&"number"==typeof n.length?a.apply(t,e):a.call(t,e),t}function c(t,e){for(var n={},r=0,i=e.length;i>r;r++)n[e[r]]=t[e[r]]
return n}function h(t,e,n){for(var r in n=n||{},t)e&&-1!==e.indexOf(r)||(n[r]=t[r])
return n}var l,v=Object.keys,g=[]
function d(t){return function(){g.push(t),l=l||setTimeout(y)||1}}function y(){for(var t=0;t<g.length;t++)g[t]()
l=g.length=0}var b=function(){function t(t){var n=this
n.change=new e,n.onPropertyUpdated=d(function(){var t=n.nextValues
n.nextValues={},n.import(t)}),n.nextValues=t||{},n.onPropertyUpdated()}return t.prototype.keys=function(){return v(this.values)},t.prototype.set=function(t,e){u(t)&&(this.nextValues[t]=e,this.onPropertyUpdated())},t.prototype.get=function(t){return this.values[t]},t.prototype.export=function(){return JSON.parse(JSON.stringify(this.values))},t.prototype.import=function(t){for(var e in this.change.next(t),t)this.values[e]=t[e]},t}(),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this
return e.tick=function(t){var n=e,r=-(n.time||t)+(n.time=t)
n.next(r)},e}return function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])
function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.subs.length&&requestAnimationFrame(this.tick)},e.prototype.subscribe=function(e){return this.subs.length||requestAnimationFrame(this.tick),t.prototype.subscribe.call(this,e)},e}(e),x=new m,k=new b,O=[],S=function(t){-1===O.indexOf(t)&&O.push(t)},T=new b
T.change.subscribe(function(t){for(var e in t){var n=T.get(e)
n&&n.setState({state:s})}})
var w=function(){function t(t){var e=this
this.tick=function(t){var n=e.state
e.seek(n.time+n.rate*t)},this.state={time:0,rate:1,state:s,alternate:!1,repeat:1},this.duration=0,this.animations=[],this.events={},this.targets={},t=t||{},this.labels=new b(t.labels),this.refs=new b(t.refs),T.set(t.name,this)}return t.prototype.import=function(t){var e,s
return t.duration&&(this.duration=t.duration),t.labels&&this.labels.import(t.labels),t.targets&&(e=t.targets,(s=function t(e,s,a,f){var p={}
for(var c in e){var h=e[c],l=s[c],g=typeof h,d=typeof l
if(u(h)&&"object"===g){if(-1!==a.indexOf(h))continue
a.push(h)}if(u(l))if(g!==d)p[c]=i
else if("object"===d){var y=t(h,l,a,f+1)
y&&(p[c]=y)}else h!==l&&(p[c]=i)
else p[c]=n}for(var c in s)u(e[c])||(p[c]=r)
return v(p).length?f>o?i:p:void 0}(this.targets,e,[],1))&&(this.targets=e,this.emit("config"),function(t,e){for(var s=t.animations,a=s.length-1;a>-1;a--){var o=s[a];(f=e[o.target])!==n&&f!==i||(s.splice(a,1),o.destroyed())}for(var u in e){var f
if((f=e[u])!==n){var h=t.targets[u],l=A(t,u,f===r||f===i?h:c(h,v(e).filter(function(t){return e[t]===r||e[t]===i})))
l.length&&(l.forEach(function(t){t.created()}),p(s,l))}}}(this,s))),this},t.prototype.export=function(){return{duration:this.duration,labels:this.labels.export(),targets:this.targets}},t.prototype.getState=function(){return this.state},t.prototype.setState=function(t){var e,n=h(t,void 0,this.state)
if("running"===n.state){var r=n.rate>=0,i=this.duration
r&&n.time>=i?(n.time=i,n.state="paused",e=!0):r||n.time>0||(n.time=0,n.state="paused",e=!0)}return this._sub||"running"!==n.state||(this._sub=x.subscribe(this.tick)),this._sub&&"running"!==n.state&&(this._sub.unsubscribe(),this._sub=void 0),this.animations.forEach(function(t){t.updated(n)}),this.emit("update"),e&&this.emit("finish"),this},t.prototype.seek=function(t){return this.setState({time:f(t)?this.labels.get(t):t}),this},t.prototype.emit=function(t){var e=this.events[t]
if(e)for(var n=e.slice(),r=0,i=n.length;i>r;r++)n[r]()
return this},t.prototype.on=function(t,e){var n=this.events[t]||(this.events[t]=[])
return-1===n.indexOf(e)&&n.push(e),this},t.prototype.off=function(t,e){var n=this.events[t]
if(n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}return this},t}()
function A(t,e,n){for(var r=t.duration,i=function(t,n){return e.split(",").map(function(e){return f(e)&&"@"===e[0]?function(t,n){var r=e.substring(1)
return t.refs.get(r)||k.get(r)}(t):(n=t.el,(r=e)&&0!==r.length?r.nodeName?[r]:[].slice.call(r[0].nodeName?r:(n||document).querySelectorAll(r)):[])
var n,r}).reduce(p,[])}(t),s=[],a=0,o=i.length;o>a;a++)for(var u=i[a],c=[],l=n,g=0,d=O.length;d>g&&v(l).length;g++){var y=O[g]({target:u,duration:r,props:l})
y&&y.length&&(p(s,y),l=h(l,c=y.map(_).reduce(p,c)))}return s}function _(t){return t.props}var j="running",N=17
return S(function(t){var e=t.target
if(e instanceof Element){var n=t.duration||1
return v(t.props).map(function(r){for(var i,s,a,o,u,f,p=t.props[r],c=v(p).map(function(t){return+t}).filter(function(t){return isFinite(t)&&t>=0&&n>=t}).sort(),l=[],g=0,d=c.length;d>g;g++){var y=c[g],b=p[y],m=y/n
if(0===m&&(i=!0),1===m&&(s=!0),"set"===b.type){var x=g-1,k=x>-1&&p[c[x]]
k&&l.push(((u={offset:m-1e-7,easing:"step-start"})[r]=k.value,u))}var O=g+1,S=d>O&&p[c[O]],T=S&&S.easing||"linear"
l.push(((f={offset:m,easing:T})[r]=b.value,f))}return i||((a=h(l[0])).offset=0,l.push(a)),s||((a=h(l[l.length-1])).offset=1,l.push(a)),{props:[r],created:function(){(o=e.animate(l,{duration:t.duration,fill:"both"})).pause()},updated:function(e){var n=e.time,r=e.rate,i=e.state===j
if(Math.abs(o.currentTime-n)>1&&(o.currentTime=n),i&&o.playbackRate!==r){var s=o.currentTime
1>s?o.currentTime=1:s<t.duration-1||(o.currentTime=t.duration-1),o.playbackRate=r}i&&!(o.playState===j||"finished"===o.playState)&&!(0>r&&N>n)&&!(r>=0&&n>t.duration-N)&&o.play(),!i&&(o.playState===j||"pending"===o.playState)&&o.pause()},destroyed:function(){o.cancel()}}})}}),t.Observable=e,t.Dictionary=b,t.nextTick=y,t.scheduler=d,t.timer=x,t.Timer=m,t.refs=k,t.use=S,t.Timeline=w,t.timelines=T,t}({})
